<shared-loading-page *ngIf="isLoading"></shared-loading-page>

<!-- Título -->
<h2 class="text-2xl text-center md:w-full mb-6 mt-4">Finanzas</h2>

<!-- Filtros -->
<form [formGroup]="filterForm" (ngSubmit)="filterSales()" class="mb-6 px-4">
  <div class="flex flex-col md:flex-row gap-4 w-full">
    <div class="flex flex-row gap-4 w-full md:w-auto">
      <!-- Desde -->
      <mat-form-field appearance="fill" class="w-full sm:w-1/2 md:w-36">
        <mat-label>Desde</mat-label>
        <input matInput [matDatepicker]="picker1" formControlName="startDate">
        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>

      <!-- Hasta -->
      <mat-form-field appearance="fill" class="w-full sm:w-1/2 md:w-36">
        <mat-label>Hasta</mat-label>
        <input matInput [matDatepicker]="picker2" formControlName="endDate">
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="w-full sm:w-1/2 md:w-48 mb-5 flex items-end">
      <button mat-raised-button class="btn-success w-full md:w-auto" type="submit">
        Filtrar
      </button>
    </div>
  </div>
</form>

<!-- Resumen -->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 px-4 mb-10">
  <div *ngFor="let item of summaryData" class="bg-white shadow rounded-lg p-4 border border-gray-200 cursor-pointer">
    <h3 class="text-lg font-semibold text-gray-700 mb-2">{{ item.paymentMethod }}</h3>
    <p class="text-xl font-bold text-green-700">$ {{ item.totalAmount | number:'1.2-2' }}</p>
  </div>
</div>

<!-- Gráfico -->
<div class="w-full px-8">
  <canvas id="financeChart" height="80"></canvas>
</div>
